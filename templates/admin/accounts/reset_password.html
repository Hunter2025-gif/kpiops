{% extends "admin/base_site.html" %}
{% load i18n admin_urls static admin_modify %}

{% block title %}{{ title }} | {{ site_title|default:_('Django site admin') }}{% endblock %}

{% block breadcrumbs %}
<div class="breadcrumbs">
<a href="{% url 'admin:index' %}">{% trans 'Home' %}</a>
&rsaquo; <a href="{% url 'admin:app_list' app_label=opts.app_label %}">{{ opts.app_config.verbose_name }}</a>
&rsaquo; <a href="{% url 'admin:accounts_customuser_changelist' %}">{{ opts.verbose_name_plural|capfirst }}</a>
&rsaquo; Reset Password
</div>
{% endblock %}

{% block content %}
<div class="form-row">
    <h1>{{ title }}</h1>
    
    <div class="module aligned">
        <form method="post">
            {% csrf_token %}
            
            <div class="form-row">
                <div>
                    <label for="id_current_info">Current User Information:</label>
                    <div class="readonly">
                        <strong>Username:</strong> {{ user.username }}<br>
                        <strong>Role:</strong> {{ user.role|default:"No role assigned" }}<br>
                        <strong>Email:</strong> {{ user.email|default:"No email" }}<br>
                        <strong>Employee ID:</strong> {{ user.employee_id|default:"Not set" }}
                    </div>
                </div>
            </div>
            
            <div class="form-row">
                <div>
                    <label for="id_new_password">New Password:</label>
                    <input type="text" name="new_password" id="id_new_password" 
                           value="{{ suggested_password }}" required
                           class="vTextField" maxlength="128">
                    <p class="help">
                        Suggested default: <strong>{{ suggested_password }}</strong><br>
                        You can modify this password before saving.
                    </p>
                </div>
            </div>
            
            <div class="submit-row">
                <input type="submit" value="Reset Password" class="default" name="_save">
                <a href="{% url 'admin:accounts_customuser_changelist' %}" class="button cancel-link">Cancel</a>
            </div>
            
            <div class="form-row">
                <div>
                    <h3>Default Password Patterns:</h3>
                    <ul>
                        <li><strong>QA roles:</strong> qa123</li>
                        <li><strong>Store roles:</strong> store123</li>
                        <li><strong>QC roles:</strong> qc123</li>
                        <li><strong>Operators:</strong> [operation]123 (e.g., mixing123, coating123)</li>
                        <li><strong>Admin:</strong> admin123</li>
                        <li><strong>Other roles:</strong> user123</li>
                    </ul>
                </div>
            </div>
        </form>
    </div>
</div>

<style>
.readonly {
    background-color: #f8f9fa;
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: 4px;
    margin-bottom: 10px;
}
.cancel-link {
    margin-left: 10px;
    text-decoration: none;
    color: #666;
    border: 1px solid #ccc;
    padding: 8px 15px;
    border-radius: 4px;
    background-color: #f8f9fa;
}
.cancel-link:hover {
    background-color: #e9ecef;
}
</style>
{% endblock %}
